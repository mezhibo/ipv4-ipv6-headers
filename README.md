**Задание 1.**

1) Запустите ПО Wireshark.
   
2) Настройте фильтр таким образом, чтобы отображались все фрагменты исходного пакета.
   
3) Запустите cmd.exe. Нажмите сочетание Win + r.
   
4) В появившемся окне напишите "cmd".Нажмите "OK".
   
5) Откроется командная строка.

6) Выполните команду ping до любого адреса пакетами размером более 1500 байт, например ya.ru.

Сколько пакетов до указанного в ping адреса отправлено?

Какие флаги в полях IPv4 заголовка установлены и почему?

Ответ приведите в виде скриншотов с дампа wireshark. Пояснения к дампу- в свободной форме.



**Решение 1.**

Запускаем пинг стандарных 4 пакетов с размером MTU 1600, видим что ответ не приходит, т.к. не на домашнем роутере не на провайдером обородование нет разрешения пропускать MTU более 1400-1500 байт

Но это не мешает нам посмотреть траффик с нашей сетевой карты

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/c007a3e9429916db75c451657f2badcce3f6d5d8/IMG/11.jpg)

Открываем дамп, и видим что у наш пакет начал фрагментирваться, т.е разделять на 2 пакета с допустимым размером, т.е. отправив стандарно 4 пакета, в дампе мы увидим 8 пакетов, которые несут информацию друг о друге.

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/c007a3e9429916db75c451657f2badcce3f6d5d8/IMG/2.jpg)


Если мы откроем содержимое первого пакета, то увидим что он не последний

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/c007a3e9429916db75c451657f2badcce3f6d5d8/IMG/3.jpg)


А если откроем содержимое второго, то мы увидим что он приклеивается к предыдущему с 1480 байта и что у нас пакет состоит из 2 кадров от 0 до 1479 байта и второго кадра с 1480 по 1607 (с расходом байт на ip адрес и заголовок ICMP)

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/c007a3e9429916db75c451657f2badcce3f6d5d8/IMG/4.jpg)


Теперь запустим обычный пинг с допустимым всеми размером пакета в 1300 байт. Видим что ответ pong на запрос ping к нам вернулся

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/c007a3e9429916db75c451657f2badcce3f6d5d8/IMG/5.jpg)


Откроем дамп траффика, и видим что фрагментации пакета не происходило, ровно 4 пакета как и нужно

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/c007a3e9429916db75c451657f2badcce3f6d5d8/IMG/6.jpg)


Смотрим более подробную информацию в пакете, и видим, что пакет не разбивался на кадры (не фрагментировался)


![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/c007a3e9429916db75c451657f2badcce3f6d5d8/IMG/7.jpg)



**Задание 2.**

1) Запустите cmd.exe. Нажмите сочетание Win + r.

2)В появившемся окне напишите "cmd".Нажмите "OK".

3)Откроется командная строка.

4) Выполните трассировку до сайта ya.ru. Команда для запуска трассировки tracert. Лучше запускать с ключами -w 1 -d. Справку по ключам можно получить, выполнив tracert --help.
Сколько хопов в вашей трассировке?

Какие значения TTL установлены в заголовке IPv4 пакета для каждого хопа?

Какой тип icmp сообщения возвращался на каждом этапе трассировки?

Какие src\dst адреса установлены в заголовке IPv4 для пакетов на каждом хопе, почему в исходном запросе и в ответе они отличаются?

Заголовки пакетов проанализируйте в дампе Wireshark.

Ответ приведите в виде скриншотов с дампа wireshark. Пояснения к дампу - в свободной форме.


**Решение 2.**

Запускаем трассировку, видим что в нашей трассировке 8 хопов

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/cd4ffdfa416bd71d1b675dc4bc8f532c2bdd8f6d/IMG/8.jpg)

Видим что трассировка закончилась на 8 хопе

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/cd4ffdfa416bd71d1b675dc4bc8f532c2bdd8f6d/IMG/9.jpg)

Видим что с каждым хопом количество TTL уменьашлось на 1, так как каждый хоп отрывал по 1 значению


![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/57616e64ecc684a09e8e70373243c0aae489349d/IMG/10.jpg)

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/57616e64ecc684a09e8e70373243c0aae489349d/IMG/12.jpg)

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/57616e64ecc684a09e8e70373243c0aae489349d/IMG/13.jpg)


С транзитных адресов возвращался ответ Type: 11 (Time-to-live exceeded) 

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/ff32f734be5f4abe9d78b80a5836c3b09311a147/IMG/14.jpg)


А в последнем видим что вернулся ответ Type: 0 (Echo (ping) reply)

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/3bf497a7c78e0bc85a381ca46921f63427e73e49/IMG/15.jpg)



В исходном запросе в заголовке присутствуют ip адреса хоста и источника, в ответах маршрутизаторы в src подставляют свой ip, в dst будет ip хоста - источника (инициатора запроса).


![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/0198587413214cd123ff4cd52729914e5d509a1d/IMG/16.jpg)

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/0198587413214cd123ff4cd52729914e5d509a1d/IMG/17.jpg)

![alt text](https://github.com/mezhibo/ipv4-ipv6-headers/blob/0198587413214cd123ff4cd52729914e5d509a1d/IMG/18.jpg)
